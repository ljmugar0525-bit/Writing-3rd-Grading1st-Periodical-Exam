<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kindergarten Writing - 3rd Grading</title>
    <style>
        :root { --primary-blue: #3498db; --line-blue: #a2d2ff; --line-red: #ff8585; }
        body { font-family: 'Comic Sans MS', cursive; background-color: #fffdf5; margin: 0; padding: 20px; }
        .container { max-width: 950px; width: 100%; background: white; border-radius: 30px; padding: 30px; margin: auto; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 8px solid #ffcc00; }
        
        .header { text-align: center; border-bottom: 5px dashed #3498db; margin-bottom: 20px; }
        h1 { color: #e91e63; font-size: 2.2em; margin: 5px 0; }
        
        .student-info { margin-bottom: 30px; text-align: center; }
        .student-info input { padding: 12px; font-size: 1.3em; border-radius: 15px; border: 4px solid #3498db; width: 60%; text-align: center; }

        .question-card { background: #ffffff; border: 3px solid #f0f0f0; border-radius: 25px; padding: 20px; margin-bottom: 40px; }
        .question-text { font-size: 1.4em; color: #2c3e50; font-weight: bold; text-align: center; }
        
        .choices-row { display: flex; justify-content: center; gap: 15px; margin: 15px 0; }
        .choice-btn { padding: 10px 20px; font-size: 1.1em; border-radius: 50px; border: 2px solid #ddd; background: white; cursor: pointer; }
        .choice-btn.selected { background: #ffcc00; border-color: #f39c12; font-weight: bold; }

        .copy-hint { font-size: 1.5em; color: #e91e63; text-align: center; margin-bottom: 10px; font-weight: bold; height: 1.5em; }

        .toolbar { display: flex; gap: 10px; margin-bottom: 10px; justify-content: center; align-items: center; }
        .color-circle { width: 30px; height: 30px; border-radius: 50%; cursor: pointer; border: 2px solid #ddd; }
        .color-circle.active { border: 3px solid #333; transform: scale(1.2); }
        canvas { border: 2px solid #3498db; border-radius: 15px; background: white; touch-action: none; display: block; margin: 0 auto; }

        .submit-btn { background: #4caf50; color: white; padding: 20px 60px; font-size: 1.8em; border: none; border-radius: 50px; cursor: pointer; margin: 40px auto; display: block; box-shadow: 0 6px 0 #2e7d32; }

        #results-area { display: none; }
        .result-title { background: #3498db; color: white; padding: 15px; border-radius: 50px; font-size: 2.5em; text-align: center; margin-bottom: 20px; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; }
        th, td { border: 2px solid #ddd; padding: 12px; text-align: center; vertical-align: middle; }
        th { background: #f2f2f2; font-size: 1.1em; }
        
        .score-display { font-size: 2.2em; color: #e91e63; font-weight: bold; margin: 20px 0; text-align: center;}
        .choice-label { background: #fff9c4; padding: 5px 10px; border-radius: 10px; font-weight: bold; color: #d35400; display: inline-block; margin-top: 5px;}

        .grade-btn { padding: 8px 15px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; margin: 2px; }
        .btn-check { background: #2ecc71; color: white; }
        .btn-cross { background: #e74c3c; color: white; }

        .sig-container { margin-top: 50px; display: flex; justify-content: space-around; }
        .sig-box { border-top: 2px solid #333; width: 220px; padding-top: 5px; text-align: center; font-weight: bold;}

        @media print { .no-print, .grade-btn, .toolbar, .submit-btn, .choices-row, .clear-btn-ui { display: none; } }
    </style>
</head>
<body>

<div class="container" id="exam-page">
    <div class="header">
        <h1>‚úèÔ∏è Kindergarten Writing</h1>
        <p>3rd Grading 1st Periodical Exam</p>
    </div>
    <div class="instructions-box" style="background: #fdf2f2; border: 2px dashed #e91e63; padding: 15px; border-radius: 20px; margin-bottom: 25px;">
    <h3 style="color: #e91e63; margin-top: 0;">How to take your exam:</h3>
    <ul style="text-align: left; color: #2c3e50; font-size: 1.1em; line-height: 1.6;">
        <li><strong> </strong> Type your name in the box.</li>
        <li><strong> </strong> Read the questions carefully and click the <strong>correct button</strong>.</li>
        <li><strong> </strong> <strong>Write the word</strong> in the box using your mouse or finger.</li>
        
    </ul>

     <div class="student-info">

        <input type="text" id="studentName" placeholder="Enter Student Name">

    </div>
</div>

    <div id="quiz-container"></div>

    <button class="submit-btn" onclick="showResults()">Check My Work! üåü</button>
</div>

<div class="container" id="results-area">
    <div class="result-title">EXAM RESULT</div>
    <div class="student-info">
        <h2 id="res-name" style="font-size: 2em; color: #2c3e50;"></h2>
        <div class="score-display">Total Score: <span id="final-score">0</span> / 25</div>
    </div>
    
    <table>
        <thead>
            <tr>
                <th width="5%">No.</th>
                <th width="30%">Question & Choice</th>
                <th width="40%">Handwriting Image</th>
                <th width="10%" class="no-print">Grade</th>
                <th width="15%">Status</th>
            </tr>
        </thead>
        <tbody id="table-body"></tbody>
    </table>
    
    <div class="sig-container">
        <div class="sig-box">Teacher's Signature</div>
        <div class="sig-box">Date Recorded</div>
    </div>
    <button class="submit-btn no-print" style="background:#3498db;" onclick="window.print()">Print This Result</button>
</div>

<script>
    const questions = [
        { q: "A yellow vegetable that grows on a cob. üåΩ", a: "Corn", b: "Pea" },
        { q: "A place with cows, pigs, and tractors. üöú", a: "Farm", b: "Zoo" },
        { q: "The sound a happy dog makes. üêï", a: "Bark", b: "Meow" },
        { q: "To use a brush and colors to make a pictureüñåÔ∏è ", a: "Paint", b: "Play" },
        { q: "A big musical instrument with strings. üéµ", a: "Harp", b: "Drum" },
        { q: "A tiny bug that lives in a hill. üêú", a: "Ant", b: "Bee" },
        { q: "You have five fingers on your?. üñêÔ∏è", a: "Hand", b: "Foot" },
        { q: "A shiny circle you wear on your finger. üíç", a: "Ring", b: "Hat" },
        { q: "A safe place to keep your money.üí∞", a: "Bank", b: "Park" },
        { q: "A purple fruit that is round and sweet. üçë", a: "Plum", b: "Apple" },
        { q: "A piece of metal that makes a sound when hit. üîî", a: "Whistle", b: "Gong" },
        { q: "A bird uses its ____ to fly.ü¶Ö", a: "wing", b: "Walk" },
        { q: "You wear these to see under the water. ü•Ω", a: "Goggle", b: "Shirt" },
        { q: "This is how a snake moves on the ground. üêç", a: "Slither", b: "Jump" },
        { q: "To leave your car in a specific spot. üöó", a: "Park", b: "Stone" },
        { q: "You go to school to ____ new things. üß†", a: "Learn", b: "Sleep" },
        { q: "A little bit hot, like a cozy blanket. üß∂", a: "Warm", b: "Cold" },
        { q: "What you do to a steak to cook it. üî•", a: "Burn", b: "Shop" },
        { q: "A small, fast car for racing. üèéÔ∏è", a: "Kart", b: "Bus" },
        { q: "Be careful because a knife is very ____. üî™", a: "Sharp", b: "Soft" },
        { q: "You sleep in this when you go camping. ‚õ∫", a: "Tent", b: "Boat" },
        { q: "A big pile of sand or dirt. ‚õ∞Ô∏è", a: "Mound", b: "Hole" },
        { q: "A group of musicians", a: "Band", b: "Team" },
        { q: "When you close and open your eyes fast. üëÅÔ∏è", a: "Blink", b: "Look" },
        { q: "A tiny piece of white snow is a ___. ‚ùÑÔ∏è", a: "Flake", b: "Ice" }
    ];

    const colors = ['#000000', '#e74c3c', '#3498db', '#2ecc71', '#9b59b6'];
    const drawingStates = [];
    const studentChoices = new Array(25).fill("No Choice");
    let scores = new Array(25).fill(0);

    function init() {
        const container = document.getElementById('quiz-container');
        questions.forEach((item, i) => {
            const card = document.createElement('div');
            card.className = 'question-card';
            card.innerHTML = `
                <div class="question-text">${i + 1}. ${item.q}</div>
                <div class="choices-row">
                    <button class="choice-btn" onclick="select(this, ${i}, '${item.a}')">${item.a}</button>
                    <button class="choice-btn" onclick="select(this, ${i}, '${item.b}')">${item.b}</button>
                </div>
                <div class="copy-hint" id="copy-${i}">Choose!</div>
                <div class="toolbar">
                    <button class="clear-btn-ui" onclick="clearC(${i})">Reset</button>
                    ${colors.map(c => `<div class="color-circle" style="background:${c}" onclick="changeColor(${i},'${c}',this)"></div>`).join('')}
                </div>
                <canvas id="canv-${i}" width="450" height="150"></canvas>
            `;
            container.appendChild(card);
            drawLines(i);
            setupCanvas(i);
        });
    }

    window.select = (btn, i, word) => {
        btn.parentElement.querySelectorAll('.choice-btn').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        studentChoices[i] = word;
        document.getElementById(`copy-${i}`).innerText = `Now Write: ${word}`;
    };

    function drawLines(i) {
        const ctx = document.getElementById(`canv-${i}`).getContext('2d');
        ctx.strokeStyle = '#a2d2ff'; ctx.lineWidth = 2;
        ctx.beginPath(); ctx.moveTo(0, 40); ctx.lineTo(450, 40); ctx.stroke();
        ctx.strokeStyle = '#ff8585';
        ctx.beginPath(); ctx.moveTo(0, 75); ctx.lineTo(450, 75); ctx.stroke();
        ctx.strokeStyle = '#a2d2ff';
        ctx.beginPath(); ctx.moveTo(0, 110); ctx.lineTo(450, 110); ctx.stroke();
    }

    function setupCanvas(i) {
        const canvas = document.getElementById(`canv-${i}`);
        const ctx = canvas.getContext('2d');
        let drawing = false;
        drawingStates[i] = { color: '#000000' };

        const getPos = (e) => {
            const rect = canvas.getBoundingClientRect();
            const clientX = e.clientX || (e.touches && e.touches[0].clientX);
            const clientY = e.clientY || (e.touches && e.touches[0].clientY);
            return { x: clientX - rect.left, y: clientY - rect.top };
        };

        const start = (e) => { drawing = true; ctx.beginPath(); const p = getPos(e); ctx.moveTo(p.x, p.y); };
        const move = (e) => { 
            if (!drawing) return; e.preventDefault();
            const p = getPos(e); ctx.lineWidth = 4; ctx.lineCap = 'round'; ctx.strokeStyle = drawingStates[i].color;
            ctx.lineTo(p.x, p.y); ctx.stroke();
        };
        canvas.addEventListener('mousedown', start); canvas.addEventListener('mousemove', move); window.addEventListener('mouseup', () => drawing = false);
        canvas.addEventListener('touchstart', start); canvas.addEventListener('touchmove', move); canvas.addEventListener('touchend', () => drawing = false);
    }

    window.changeColor = (i, c, el) => {
        drawingStates[i].color = c;
        el.parentElement.querySelectorAll('.color-circle').forEach(circle => circle.classList.remove('active'));
        el.classList.add('active');
    };

    window.clearC = (i) => {
        const canvas = document.getElementById(`canv-${i}`);
        canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);
        drawLines(i);
    };

    window.grade = (i, point) => {
        scores[i] = point;
        const statusEl = document.getElementById(`status-${i}`);
        statusEl.innerText = point === 1 ? "‚úî Good" : "‚úò Check";
        statusEl.style.color = point === 1 ? "#2ecc71" : "#e74c3c";
        document.getElementById('final-score').innerText = scores.reduce((a, b) => a + b, 0);
    };

    window.showResults = () => {
        const name = document.getElementById('studentName').value;
        if (!name) return alert("Write your name first!");
        document.getElementById('exam-page').style.display = 'none';
        document.getElementById('results-area').style.display = 'block';
        document.getElementById('res-name').innerText = "Student: " + name;
        
        const tbody = document.getElementById('table-body');
        questions.forEach((item, i) => {
            const row = tbody.insertRow();
            row.innerHTML = `
                <td>${i+1}</td>
                <td style="text-align:left;">
                    ${item.q}<br>
                    <span class="choice-label">Choice: ${studentChoices[i]}</span>
                </td>
                <td><img src="${document.getElementById(`canv-${i}`).toDataURL()}" style="width:220px; border:1px solid #ddd;"></td>
                <td class="no-print">
                    <button class="grade-btn btn-check" onclick="grade(${i}, 1)">‚úî</button>
                    <button class="grade-btn btn-cross" onclick="grade(${i}, 0)">‚úò</button>
                </td>
                <td id="status-${i}" style="font-weight:bold;">-</td>
            `;
        });
        window.scrollTo(0,0);
    };

    init();
</script>
</body>
</html>